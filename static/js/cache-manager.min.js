// Clean cache management without URL pollution
(function(){
// Immediately clean URL on page load
function cleanURL(){
if(window.location.href.includes('_t=')||window.location.href.includes('&amp;')){
var url=new URL(window.location.href);
url.searchParams.delete('_t');
var cleanUrl=url.toString().replace(/&amp;/g,'&').replace(/\?&/g,'?').replace(/&&+/g,'&').replace(/[?&]$/,'');
if(cleanUrl!==window.location.href){
window.history.replaceState({},'',cleanUrl);
}
}
}
cleanURL();
// Clear service worker cache
if("serviceWorker"in navigator){
navigator.serviceWorker.getRegistrations().then(function(e){
for(let t of e){t.unregister()}
})
}
// Clean URLs on all clicks
document.addEventListener('click',function(e){
if(e.target.tagName==='A'||e.target.closest('a')){
setTimeout(cleanURL,10);
}
});
})();